(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{8355:function(e,r,t){Promise.resolve().then(t.bind(t,6758))},6758:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return p}});var a=t(7437),l=t(2265),n=t(6648),s=t(2974),i=t(2218),o=t(4839),d=t(6164);function c(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,d.m6)((0,o.W)(r))}let u=(0,i.j)("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),g=l.forwardRef((e,r)=>{let{className:t,variant:l,size:n,asChild:i=!1,...o}=e,d=i?s.g7:"button";return(0,a.jsx)(d,{className:c(u({variant:l,size:n,className:t})),ref:r,...o})});g.displayName="Button";let h=e=>{let{value:r,max:t}=e;return(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700",children:(0,a.jsx)("div",{className:"bg-blue-600 h-2.5 rounded-full",style:{width:"".concat(r/t*100,"%")}})})};var f=t(8726),m=t(4867);function x(e){let{children:r,className:t=""}=e;return(0,a.jsx)("div",{className:"bg-white shadow rounded-lg ".concat(t),children:r})}function y(e){let{children:r,className:t=""}=e;return(0,a.jsx)("div",{className:"p-6 ".concat(t),children:r})}function v(e){let{className:r,...t}=e;return(0,a.jsx)("div",{className:c("animate-pulse rounded-md bg-primary/10",r),...t})}function p(){let[e,r]=(0,l.useState)(null),[t,n]=(0,l.useState)(null),[s,i]=(0,l.useState)(!1),[o,d]=(0,l.useState)(0),c=(0,l.useRef)(null),u=async()=>{if(e){i(!0),d(0);try{let r=document.createElement("img");r.src=e,await new Promise((e,t)=>{r.onload=e,r.onerror=t});let t=document.createElement("canvas");t.width=r.width,t.height=r.height;let a=t.getContext("2d");if(!a)throw Error("Unable to get canvas context");a.drawImage(r,0,0);let l=a.getImageData(0,0,t.width,t.height),s=l.data;d(20);let i=function(e,r,t){let a=new Uint8Array(r*t);for(let r=0;r<e.length;r+=4)a[r/4]=.299*e[r]+.587*e[r+1]+.114*e[r+2];let l=new Uint8Array(r*t),n=[-1,0,1,-2,0,2,-1,0,1],s=[-1,-2,-1,0,0,0,1,2,1];for(let e=1;e<t-1;e++)for(let t=1;t<r-1;t++){let i=0,o=0;for(let l=-1;l<=1;l++)for(let d=-1;d<=1;d++){let c=a[(e+l)*r+(t+d)];i+=c*n[(l+1)*3+(d+1)],o+=c*s[(l+1)*3+(d+1)]}l[e*r+t]=Math.min(255,Math.sqrt(i*i+o*o))}return l}(s,t.width,t.height);d(40);let o=function(e,r,t){let a=new Uint8Array(r*t),l=function(e,r,t){let a=[];for(let[l,n]of[[0,0],[r-1,0],[0,t-1],[r-1,t-1],[Math.floor(r/2),0],[0,Math.floor(t/2)],[r-1,Math.floor(t/2)],[Math.floor(r/2),t-1]]){let t=(n*r+l)*4;a.push([e[t],e[t+1],e[t+2]])}return a}(e,r,t);for(let r=0;r<e.length;r+=4){let t=e[r],n=e[r+1],s=e[r+2],i=!0;for(let e of l){let r=t-e[0],a=n-e[1],l=s-e[2];if(30>Math.sqrt(r*r+a*a+l*l)){i=!1;break}}a[r/4]=i?255:0}return a}(s,t.width,t.height);d(60);let c=function(e,r,t,a){let l=new Uint8Array(t*a);for(let t=0;t<l.length;t++)l[t]=e[t]>30||255===r[t]?255:0;return l}(i,o,t.width,t.height);d(80),function(e,r){for(let t=0;t<e.length;t+=4)e[t+3]=r[t/4]}(s,c),d(90),function(e,r,t){let a=new Uint8ClampedArray(e);for(let l=2;l<t-2;l++)for(let t=2;t<r-2;t++){let n=(l*r+t)*4;if(0===e[n+3])continue;let s=0;for(let a=-2;a<=2;a++)for(let n=-2;n<=2;n++)e[((l+a)*r+(t+n))*4+3]>0&&s++;s<17.5&&(a[n+3]=0)}for(let r=0;r<e.length;r++)e[r]=a[r]}(s,t.width,t.height),a.putImageData(l,0,0),n(t.toDataURL()),d(100),f.Am.success("Your image has been processed successfully.")}catch(e){console.error("Error processing image:",e),f.Am.error("An error occurred while processing the image.")}finally{i(!1)}}};return(0,a.jsxs)("div",{className:"flex flex-col min-h-screen bg-gradient-to-b from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800",children:[(0,a.jsx)(f.x7,{}),(0,a.jsx)("header",{className:"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm text-gray-800 dark:text-white py-6 px-6 shadow-sm sticky top-0 z-10",children:(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"Advanced Background Remover"})}),(0,a.jsx)("main",{className:"flex-1 flex flex-col items-center justify-center px-4 md:px-8 py-12",children:(0,a.jsx)(x,{className:"w-full max-w-3xl",children:(0,a.jsx)(y,{className:"p-6 space-y-6",children:e?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsx)(b,{title:"Original Image",imageSrc:e}),(0,a.jsx)(b,{title:"Processed Image",imageSrc:t,isProcessed:!0,isLoading:s})]}),s?(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"w-full",children:(0,a.jsx)(h,{value:o,max:100})}),(0,a.jsxs)("p",{className:"text-center text-sm text-gray-500 dark:text-gray-400",children:["Processing: ",o,"%"]})]}):(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)(g,{onClick:u,disabled:s||!!t,children:t?"Background Removed":"Remove Background"}),t&&(0,a.jsxs)(g,{onClick:()=>{if(t){let e=document.createElement("a");e.href=t,e.download="processed_image.png",document.body.appendChild(e),e.click(),document.body.removeChild(e)}},variant:"outline",children:[(0,a.jsx)(m._8t,{className:"w-4 h-4 mr-2"}),"Download"]})]}),(0,a.jsxs)(g,{onClick:()=>{r(null),n(null),d(0),c.current&&(c.current.value="")},variant:"ghost",className:"w-full",children:[(0,a.jsx)(m.BGW,{className:"w-4 h-4 mr-2"}),"Start Over"]})]}):(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-12 space-y-4 cursor-pointer hover:border-primary transition-colors",onClick:()=>{var e;return null===(e=c.current)||void 0===e?void 0:e.click()},children:[(0,a.jsx)(m.rG2,{className:"w-12 h-12 text-gray-400 dark:text-gray-500"}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-700 dark:text-gray-300",children:"Drag and drop your image here"}),(0,a.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"or click to upload"}),(0,a.jsx)("input",{type:"file",ref:c,onChange:e=>{var t;let a=null===(t=e.target.files)||void 0===t?void 0:t[0];if(a){if(a.size>5242880){f.Am.error("Please upload an image smaller than 5MB.");return}let e=new FileReader;e.onload=e=>{var t;r(null===(t=e.target)||void 0===t?void 0:t.result),n(null)},e.readAsDataURL(a)}},accept:"image/*",className:"hidden"}),(0,a.jsx)(g,{variant:"outline",className:"mt-4",children:"Select Image"})]})})})})]})}function b(e){let{title:r,imageSrc:t,isProcessed:l=!1,isLoading:s=!1}=e;return(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-700 dark:text-gray-300",children:r}),(0,a.jsx)("div",{className:"relative aspect-square rounded-lg overflow-hidden shadow-inner bg-gray-100 dark:bg-gray-700",children:t?(0,a.jsx)(n.default,{src:t,alt:r,fill:!0,style:{objectFit:"cover"}}):l?s?(0,a.jsx)(v,{className:"w-full h-full"}):(0,a.jsx)("div",{className:"flex items-center justify-center h-full text-gray-400 dark:text-gray-500",children:"No processed image yet"}):null})]})}}},function(e){e.O(0,[310,662,971,23,744],function(){return e(e.s=8355)}),_N_E=e.O()}]);